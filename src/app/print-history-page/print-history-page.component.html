<div class="print-history-container">
  <h2>Histórico de Impressões</h2>

  <div *ngIf="isLoading" class="loading-message">
    Carregando histórico...
  </div>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && !errorMessage && printHistory.length === 0" class="no-data-message">
    Nenhum registro de impressão encontrado.
  </div>

  <div *ngIf="!isLoading && !errorMessage && printHistory.length > 0" class="history-table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Data/Hora</th>
          <th>Usuário</th>
          <th>Impressora</th>
          <th>Etiqueta</th>
          <th>Produto</th>
          <th>Codigo</th>
          <th>Lote</th>
          <th>Bobina</th> 
          <th>Cópias</th>
          <th>Reimpressão</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let entry of printHistory">
          <td>{{ formatTimestamp(entry.timestamp) }}</td>
          <td>{{ entry.userName }}</td>
          <td>{{ entry.printerName }}</td>
          <td>{{ entry.labelName }}</td>
          <td>{{ entry.productName }}</td>
          <td>{{ entry.productCode }}</td>
          <td>{{ getLoteWithoutBobina(entry.productLote ?? '') }}</td> 
          <td>{{ getBobinaFromLote(entry.productLote ?? '') }}</td> 
          <td>{{ entry.copies }}</td>
          <td>{{checkReprint(entry.reprint)}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>